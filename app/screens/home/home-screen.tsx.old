import { StackScreenProps } from "@react-navigation/stack"
import { observer } from "mobx-react-lite"
import React, { FC } from "react"
import { TextStyle, View, ViewStyle, FlatList } from "react-native"
import { GradientBackground, Screen, Text, TextField } from "../../components"
import { NavigatorParamList } from "../../navigators"
import { FULL, TEXT } from "../../styles"
import { color, spacing } from "../../theme"
import { ProductListItem } from "./product-list-item"

const dummy = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]

const CONTAINER: ViewStyle = {
  backgroundColor: color.transparent,
  // paddingHorizontal: spacing[5],
  marginVertical: spacing[4],
}

const HEADER_TEXT: TextStyle = {
  ...TEXT,
  fontSize: 20,
}

const HEADER_WRAPPER: ViewStyle = {
  flexDirection: "row",
  alignItems: "center",
  alignSelf: "center",
  justifyContent: "space-between",
  width: "100%",
}

const FILTER_WRAPPER: ViewStyle = {
  ...HEADER_WRAPPER,
  marginTop: spacing[2],
}

const SLIDER_CONTAINER: ViewStyle = {
  //   ...DROP_SHADOW,

  minHeight: 44,
  backgroundColor: color.palette.white,
  paddingHorizontal: spacing[4],
  marginRight: spacing[4],
  flex: 1,
  borderRadius: 10,
  justifyContent: "center",
}

const SLIDER_TEXT: TextStyle = {
  color: color.palette.black,
  fontSize: 18,
}

const FILTER_BUTTON: ViewStyle = {
  //   ...DROP_SHADOW,

  minHeight: 44,
  backgroundColor: color.palette.white,
  borderRadius: 10,
  paddingHorizontal: spacing[4],

  width: 44,
}

const PRODUCT_LIST_CONTAINER: ViewStyle = {
  //   ...DROP_SHADOW,

  backgroundColor: color.palette.white,
  borderRadius: 10,
  width: "100%",
  height: "100%",
  marginTop: spacing[5],
  paddingBottom: spacing[5],
}

export const HomeScreen: FC<StackScreenProps<NavigatorParamList, "welcome">> = observer(
  ({ navigation }) => {
    return (
      <View testID="HomeScreen" style={FULL}>
        <GradientBackground colors={[color.palette.primary, color.palette.secondary]} />
        <Screen style={CONTAINER} preset="fixed" backgroundColor={color.transparent}>
          <View style={{ marginHorizontal: spacing[4] }}>
            <View style={HEADER_WRAPPER}>
              <Text style={HEADER_TEXT}>Mang Jarwo</Text>
              <Text style={HEADER_TEXT}>16/Sep/2022</Text>
            </View>

            <TextField placeholder="Cari..." />

            <View style={FILTER_WRAPPER}>
              {/* {Picker start} */}
              <View style={SLIDER_CONTAINER}>
                <Text style={SLIDER_TEXT} text={"Semua"} />
              </View>
              {/* Picker end */}

              {/* Filter button */}
              <View style={FILTER_BUTTON}></View>
              {/* end of filter button */}
            </View>
          </View>

          <View style={PRODUCT_LIST_CONTAINER}>
            {/* {dummy.map((data) => (
              <ProductListItem key={data} />
            ))} */}
            <FlatList
              // contentContainerStyle={{ flexGrow: 1 }}
              scrollEnabled={true}
              data={dummy}
              renderItem={({ item }) => <ProductListItem key={item} />}
              // ListHeaderComponent={renderHeader}
              // ListFooterComponent={renderFooter}
              // ListEmptyComponent={renderEmpty}
              // onEndReachedThreshold={0.2}
              // onEndReached={fetchMoreData}
            />
          </View>
        </Screen>
      </View>
    )
  },
)
